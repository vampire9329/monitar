<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Location Monitor</title>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
  <style>
    #map {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>
  <h2>Live Location Monitor</h2>
  <div id="map"></div>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyB3HTUEhnLy1fq0iq95PJoiUNDu4jcjCzo",
      authDomain: "live-tracker-e6f6a.firebaseapp.com",
      databaseURL: "https://live-tracker-e6f6a-default-rtdb.firebaseio.com",
      projectId: "live-tracker-e6f6a",
      storageBucket: "live-tracker-e6f6a.firebasestorage.app",
      messagingSenderId: "825903580998",
      appId: "1:825903580998:web:c75b6420e6385bdf284747"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Initialize Google Map
    let map;
    let marker;
    function initMap(lat, lng) {
      const pos = { lat, lng };
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 16,
        center: pos,
      });
      marker = new google.maps.Marker({
        position: pos,
        map: map,
        title: "Live Location"
      });
    }

    // Listen to Firebase changes
    db.ref("users/testUser").on("value", (snapshot) => {
      const data = snapshot.val();
      if (data) {
        const lat = data.latitude;
        const lng = data.longitude;

        if (!map) {
          initMap(lat, lng);
        } else {
          const pos = { lat, lng };
          marker.setPosition(pos);
          map.setCenter(pos);
        }
      }
    });
  </script>
</body>
</html>
